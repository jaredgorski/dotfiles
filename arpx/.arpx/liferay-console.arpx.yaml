entrypoint: liferay-console

processes:
  - name: liferay-console
    color: blue
    command: yarn dev
    cwd: /Users/jaredgorski/Projects/Liferay/liferay-console
    onfail: notifyFailure

monitors:
  - process: liferay-console
    condition: '[[ "$LOG_LINE" =~ "$ next dev" ]]'
    actions:
      - notifyBuilding

  - process: liferay-console
    condition: '[[ "$LOG_LINE" =~ "compiled successfully" ]]'
    actions:
      - notifyReady

  # - process: liferay-console
  #   condition: '[[ "$LOG_LINE" =~ "Error" ]]'
  #   actions:
  #     - notifyFailure

actions:
  - name: notifyBuilding
    command: |
      osascript -e 'display notification "Development LiferayConsole is building..." with title "arpx"'

  - name: notifyReady
    command: |
      osascript -e 'display notification "Development LiferayConsole is ready." with title "arpx" sound name "Ping"'

  - name: notifyFailure
    command: |
      osascript -e 'display notification "Development LiferayConsole encountered failure." with title "arpx" sound name "Funk"'
